# 📋 GitHub CVE Monitor 更新日志

本文档记录 GitHub CVE Monitor 项目的重要更新和修改。

---

## [v2.2.1] - 2025-09-23 🔒 安全性改进

### 🔒 安全修复
- **移除敏感信息**：完全移除GitHub Personal Access Token
- **公共API调用**：改为使用GitHub公共API，避免认证token泄露
- **代码清理**：移除所有测试文件和临时调试代码

### 🗂️ 项目结构优化
- **目录重命名**：`归档文档/` → `archive/`
- **清理测试文件**：移除所有test_*.html测试页面
- **清理脚本文件**：移除临时生成和测试脚本
- **文档整理**：移除fix_report.md等临时文档

### 🔧 技术改进
- **API调用优化**：从`authenticatedFetch`改为`publicFetch`
- **错误处理改进**：更好的公共API限制处理
- **代码精简**：移除不必要的认证相关代码

---

## [v2.2.0] - 2025-09-23 🎉 史诗级更新

### 🚀 重大特性

#### 📊 统计系统全面重构
- **新增每日数据生成系统**：自动化生成每日CVE统计数据
- **新增统计页面**：完整的CVE数据可视化和趋势分析
- **新增数据状态透明化**：真实显示数据来源和404状态

#### 🤖 自动化工作流
- **新增GitHub Actions工作流**：每日自动生成和更新CVE数据
- **新增数据文件管理**：结构化存储每日CVE数据为JSON格式
- **新增脚本系统**：完整的数据处理和分析脚本

### 🐛 关键修复

#### HTTP 404状态处理修复
**问题描述**：
- 统计页面显示误导性的"HTTP 404，请检查网络连接或联系管理员"错误
- 使用随机模拟数据掩盖真实数据状态

**修复方案**：
- ✅ **诚实透明**：真实处理404状态，不再将其视为错误
- ✅ **状态说明**：明确解释404表示"数据文件尚未上传到远程仓库"
- ✅ **移除模拟数据**：完全移除所有随机生成的模拟数据
- ✅ **数据状态列**：新增表格列明确标识每行数据的真实来源

#### CVE计算逻辑修复
**问题描述**：
- 累计CVE计算方法错误，显示异常数值
- 增长率计算公式不正确

**修复方案**：
- ✅ **累计CVE公式**：使用科学的基于日期估算方法
  ```javascript
  // 基于CVE历史增长模式
  const daysSince2009 = Math.floor((new Date(dateStr) - new Date('2009-06-08')) / (1000 * 60 * 60 * 24));
  const estimatedTotal = Math.round(26827 + (daysSince2009 * 8.79));
  ```
- ✅ **增长率计算**：修正为正确的日同比增长率
  ```javascript
  // 只在连续真实数据间计算增长率
  if (day.isReal && prevDay && prevDay.isReal && prevDay.count > 0) {
    const dailyChange = ((day.count - prevDay.count) / prevDay.count * 100);
    growthRate = (dailyChange >= 0 ? '+' : '') + dailyChange.toFixed(1) + '%';
  }
  ```

### 🎨 用户体验改进

#### 可视化增强
- **数据状态可视化**：不同状态的数据行使用不同背景色区分
  - 🟢 绿色：真实数据（`#f8fff8`）
  - 🟡 黄色：404缺失数据（`#fffef8`）
  - 🔴 红色：错误数据（`#fff8f8`）
- **智能状态提示**：根据数据可用性显示不同色彩的状态说明
- **悬停效果**：表格行悬停时的视觉反馈

#### 信息透明化
- **数据来源说明**：详细说明每种数据状态的含义
- **技术说明**：添加计算公式和方法的详细解释
- **用户友好提示**：将技术性错误转换为用户易懂的说明

### 📁 新增文件

#### 核心功能文件
- `docs/stats.html` - CVE统计可视化页面
- `scripts/enhanced_daily_data_generator.py` - 增强版每日数据生成器
- `scripts/update_readme_stats.py` - README统计更新脚本
- `.github/workflows/generate-daily-data.yml` - GitHub Actions工作流

#### 数据存储
- `docs/Data/daily/` - 每日CVE数据存储目录
- `docs/Data/daily/2025-09-23.json` - 示例每日数据文件

#### 文档和测试
- `docs/DAILY_DATA_SYSTEM.md` - 每日数据系统说明文档
- `docs/SOLUTION_VERIFICATION.md` - 解决方案验证文档
- `docs/fix_report.md` - 详细修复报告
- `docs/test_verification.html` - 修复验证测试页面
- `docs/test_fixed_stats.html` - 修复后统计页面测试
- `docs/test_growth_rate.html` - 增长率计算测试页面

### 🔧 技术改进

#### 代码质量
- **错误处理优化**：更健壮的网络请求和数据解析错误处理
- **数据验证**：添加JSON数据格式验证和合法性检查
- **性能优化**：改进数据加载和渲染性能

#### 系统架构
- **模块化设计**：将数据生成、处理、展示分离为独立模块
- **配置管理**：统一的配置文件和参数管理
- **日志系统**：完善的调试和运行日志记录

### 🎯 修复理念

本次更新的核心理念是**诚实透明**：

1. **不掩盖问题**：不再使用模拟数据掩盖HTTP 404状态
2. **真实反映状态**：诚实显示系统当前的数据可用性
3. **用户友好解释**：将技术问题转换为用户易懂的说明
4. **数据准确性**：确保所有计算和显示的数值都基于真实数据和科学方法

### 📊 影响范围

- **用户体验**：大幅提升统计页面的可用性和信息价值
- **数据质量**：确保所有显示数据的准确性和可靠性
- **系统透明度**：用户可以清楚了解数据来源和系统状态
- **维护性**：简化了数据处理逻辑，提高了代码可维护性

---

## [v2.1.0] - 2025-09-22

### 🔄 常规更新
- 优化CVE数据收集逻辑
- 改进README.md格式和内容
- 修复一些小的显示问题

---

## [v2.0.0] - 2025-09-21

### 🚀 重大更新
- 项目架构重构
- 新增数据库支持
- 改进CVE检测算法

---

## [v1.0.0] - 2025-09-20

### 🎉 首次发布
- 基础CVE监控功能
- GitHub仓库扫描
- 基本报告生成

---

## 📝 版本说明

- **Major版本**：重大功能更新或架构变更
- **Minor版本**：新功能添加或重要改进
- **Patch版本**：Bug修复和小的改进

## 🤝 贡献

欢迎提交Issue和Pull Request来帮助改进这个项目！

---

*最后更新时间：2025-09-23*